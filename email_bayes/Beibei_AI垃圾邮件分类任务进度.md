垃圾邮件分类任务进度
===

## 时间

2018.1.31 - 2018.2.3 

## 工作内容及结果

#### 1.特征词汇提取

+ 筛选不含字符的单词
+ 筛选单词字母多于2个的单词
+ 去除停用词
+ 去除重复单词

#### 2.对训练数据处理构建单词频率库

+ 分词、收集所有的有效词汇
+ 统计有效词汇在垃圾邮件、非垃圾邮件中出现的个数
+ 分别计算有效词汇在垃圾邮件、非垃圾邮件中出现的频率

#### 3.使用测试数据进行验证

+ 使用贝叶斯分类器进行分类


#### 4.结果分析
<<<<<<< HEAD
![result1](.Beibei_AI/homework/ly/task2/email_bayes_result1.png)
=======
![result1](https://raw.githubusercontent.com/liuyi12138/Dian_training/master/email_bayes/email_bayes_result1.png)
>>>>>>> bd2f9f95255a59f6a5dc4d176cdb9527f6beeb80
**FN与FP数量相当，但错误率仍较高，分类不够理想，从数据处理方面入手**

#### 5.抽样检测
**由于处理所有数据太慢(大概需要３个小时),从数据集中随机抽取部分数据进行各种玄学实验，发现了一些有趣的现象**
* 1.不再去除停用词，准确率上升，应该是垃圾邮件中含有特定停用词的几率与正常邮件不同

* 2.单词长度的玄学调参，确定单词长度大于２时效果较好，单词长度上限为20时准确率有所增加，但是单词长度在12以后准确率不变，猜测是少有长度超过12的单词，但并不能解释为什么加了上限准确率还会上升，感觉数据量不够，暂定12>len>2进行下一轮测试

* 3.数据量对结果的影响，当数据量为20-30组时，(不去除停用词)准确率在0.９左右，当数据量上升到50-60组时准确率下降到0.85左右，说明数据较少时可能存在过拟合现象，细思恐极，会不会停用词问题是由于过拟合产生的，所以就陷入矛盾，若不去除停用词，准确率上升，但可能有过拟合问题，天皇再换一组数据来调试估计就要GG，但我想训练得三个小时，ljzzy也不会闲的蛋疼来测试，姑且当没有过拟合吧.


## 下一步计划
**根据我的检测以及参考马银超的结论，任何试图规范单词的操作都会降低准确率，最好的方法就是什么都不做，无论是停用词还是拼写问题，本身就是垃圾邮件的特征之一，最好保留，这也提供了一个新思路，既然不能去除这些问题不如给他们更高的权重.**

+ 正在对所有数据做不去除停用词的测试
+ 增大停用词的权重，想办法找出垃圾邮件中的关键词
+ 在ddl允许的情况下,学习超哥的方法，使用enchant库进行拼写检查并不去除这些单词，反而增加其权重，毕竟垃圾邮件可能出现更多错误
+ 继续玄学调参

#### 6.结果分析
![result2](.Beibei_AI/homework/ly/task2/email_bayes_result2.png)
**不做停用词筛选果然准确率++，今晚再做一波优化就去做下一个任务了**

#### 7.抽样检测
* 1.出乎意料的结果，可能是抽样的数据集太少，给lajiwords加权到1-2倍答案完全不变
* 2.更出乎意料，加权10倍，准确率达到了0.96+,加权100倍准确率就100%了，看来垃圾邮件里面100%含有某些词？不过召回率不高，继续调参
* 3.当阀值为10次时，加权提高26倍效果最好(是不是太高了woc)

**目前正在准备数据集，这一次不改动数据集就可以保存了，等数据集出来后就在全部数据的基础上进行玄学调参，如果效果好，就宣布任务完成了，给自己立个flag 准确率0.995+,召回率0.95+.按道理数据多起来后权数应该不能超过２，不然召回率会大幅减少，最后还得看结果**

#### 8.结果分析
![result3](.Beibei_AI/homework/ly/task2/email_bayes_result3.png)
**准确率和召回率都有所上升，目前将出现300次以上的数据增多100倍，接下来尝试1000倍**
![result4](.Beibei_AI/homework/ly/task2/email_bayes_result4.png)
![result5](.Beibei_AI/homework/ly/task2/email_bayes_result5.png)
**准确率恢复result2水准???奇奇怪怪，感觉加权对其影响不大了，下一步检查拼写再加加权吧**

#### 9.抽样检测
**检查拼写真的迷，应该是因为有其他语言的原因，抽样检查差异非常大，在0.5到0.9之间徘徊，故舍弃**

#### 10.结题报告
经过各种尝试，最终准确率最高0.994643，所做处理为对出现300次以上的词次数增加100倍．
